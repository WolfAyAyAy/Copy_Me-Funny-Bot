import discord # –≠—Ç–∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ discord.py –∏ aiohttp, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
import aiohttp 

intents = discord.Intents.all() # –ó–¥–µ—Å—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç intents, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (–∏–Ω—Ç–µ–Ω—Ç–æ–≤), –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–æ—Ç—É –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Discord. discord.Intents.all() –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ–Ω—Ç—ã.
client = discord.Client(intents=intents) # –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç client, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–∞–º–æ–≥–æ –±–æ—Ç–∞. –ï–º—É –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–Ω—Ç–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—ã—à–µ.

# –≠—Ç–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ "on_ready". –≠—Ç–æ —Å–æ–±—ã—Ç–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, 
–∫–æ–≥–¥–∞ –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º Discord. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –æ–Ω–æ –ø—Ä–æ—Å—Ç–æ 
–≤—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫–∞–∫ –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–ª—Å—è.

@client.event 
async def on_ready():
print('We have logged in as {0.user}'.format(client))

# –≠—Ç–æ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ "on_message", –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, 
–∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä Discord. –í —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è 
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ –∫–∞–Ω–∞–ª–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–æ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å.

@client.event 
async def on_message(message):
username = str(message.author).split('#')[0]
user_message = str(message.content)
channel = str(message.channel)
print(f'{username}: {user_message} ({channel})') 
print('------')

# –≠—Ç–æ—Ç –±–ª–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–∞–º–∏–º –±–æ—Ç–æ–º. 
–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –±–æ—Ç–æ–º, —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–∫–∞–∫ –±—ã –≤—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏).

if message.author == client.user:
return 

if user_message.lower() == '!givejoke': # –≠—Ç–æ—Ç –±–ª–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ —Ä–∞–≤–µ–Ω "!givejoke". –ï—Å–ª–∏ —ç—Ç–æ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –±–æ—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.

# –í —ç—Ç–æ–º –±–ª–æ–∫–µ –∫–æ–¥–∞ –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç aiohttp –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP GET-–∑–∞–ø—Ä–æ—Å–∞ –∫ API "icanhazdadjoke.com", 
—á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —à—É—Ç–∫—É. –ó–∞—Ç–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç JSON –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π data.

async with aiohttp.ClientSession() as session:
async with session.get('https://icanhazdadjoke.com/', headers={'Accept': 'application/json'}) as resp: #HTTP GET request to 'icanhazdadjoke' API for a random joke,
data = await resp.json() 

# –ó–¥–µ—Å—å –∏–∑ –¥–∞–Ω–Ω—ã—Ö JSON –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç —à—É—Ç–∫–∏ –∏ –µ—ë ID, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
joke = data['joke'] 
jokeid = data["id"] 


print(f'joke id: {jokeid}') # ID —à—É—Ç–∫–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å.
bot_joke = await message.channel.send(f"{message.author.mention} {joke}") # –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —à—É—Ç–∫–æ–π –≤ —Ç–æ—Ç –∂–µ –∫–∞–Ω–∞–ª, –≥–¥–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. message.author.mention –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

# –ë–æ—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ "üòÇ" –∏ "ü§¢" –∫ —Å–æ–æ–±—â–µ–Ω–∏—é —Å —à—É—Ç–∫–æ–π, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –µ—ë —Å–º–µ—à–Ω–æ—Å—Ç—å.
await bot_joke.add_reaction("üòÇ") 
await bot_joke.add_reaction("ü§¢")

# –ó–¥–µ—Å—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –¥–æ–ª–∂–Ω—ã –∑–∞–º–µ–Ω–∏—Ç—å 
–Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Discord-–±–æ—Ç–∞. –≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Discord.
TOKEN = 'YOUR_TOKEN'
client.run(TOKEN)
